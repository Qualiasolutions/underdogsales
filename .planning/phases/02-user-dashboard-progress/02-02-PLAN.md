---
phase: 02-user-dashboard-progress
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/dashboard/progress/ScoreTrendChart.tsx
  - src/components/dashboard/progress/DimensionRadarChart.tsx
  - src/components/dashboard/progress/CurriculumProgressCard.tsx
  - src/components/dashboard/progress/ModuleBreakdown.tsx
  - src/components/dashboard/DashboardClient.tsx
  - src/app/dashboard/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can see score trend over time as a line chart"
    - "User can see dimension averages as a radar chart"
    - "User can see curriculum progress with module status indicators"
    - "User can switch between Practice, Calls, and Progress tabs"
    - "Empty states shown when no data exists"
  artifacts:
    - path: "src/components/dashboard/progress/ScoreTrendChart.tsx"
      provides: "Line chart for score trends"
      min_lines: 40
    - path: "src/components/dashboard/progress/DimensionRadarChart.tsx"
      provides: "Radar chart for dimension breakdown"
      min_lines: 40
    - path: "src/components/dashboard/progress/CurriculumProgressCard.tsx"
      provides: "Curriculum progress visualization"
      min_lines: 30
    - path: "src/components/dashboard/progress/ModuleBreakdown.tsx"
      provides: "Module list with status indicators"
      min_lines: 40
    - path: "src/components/dashboard/DashboardClient.tsx"
      provides: "Updated with Progress tab"
      contains: "activeTab.*progress"
  key_links:
    - from: "src/components/dashboard/DashboardClient.tsx"
      to: "ScoreTrendChart, DimensionRadarChart, CurriculumProgressCard"
      via: "import and render in Progress tab"
      pattern: "import.*ScoreTrendChart|DimensionRadarChart|CurriculumProgressCard"
    - from: "src/app/dashboard/page.tsx"
      to: "src/lib/actions/progress.ts, src/lib/actions/curriculum.ts"
      via: "server action calls"
      pattern: "getScoreTrends|getDimensionAverages|getCurriculumProgress"
---

<objective>
Create chart components and add Progress tab to the dashboard.

Purpose: Users can visualize their curriculum progress and performance trends.
Output: Four new progress components, updated DashboardClient with third tab, updated page with data fetching.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-user-dashboard-progress/02-RESEARCH.md
@.planning/phases/02-user-dashboard-progress/02-01-SUMMARY.md

# Existing components to extend
@src/components/dashboard/DashboardClient.tsx (add Progress tab)
@src/components/curriculum/CurriculumProgress.tsx (reuse OverallProgressBar, CurriculumStats)
@src/app/dashboard/page.tsx (add progress data fetching)

# Server actions from Plan 01
@src/lib/actions/progress.ts
@src/lib/actions/curriculum.ts

# Design patterns
@src/config/curriculum.ts (module names for breakdown)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ScoreTrendChart component</name>
  <files>src/components/dashboard/progress/ScoreTrendChart.tsx</files>
  <action>
    Create `src/components/dashboard/progress/ScoreTrendChart.tsx`:

    - 'use client' directive (recharts needs browser APIs)
    - Import from recharts: LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ReferenceLine
    - Import cn from @/lib/utils

    Props interface:
    ```typescript
    interface ScoreTrendChartProps {
      data: Array<{ date: string; score: number }>
      className?: string
    }
    ```

    Component behavior:
    - If data.length === 0, render empty state: "No practice sessions yet" centered, muted text
    - Wrap chart in ResponsiveContainer width="100%" height={300}
    - LineChart with:
      - CartesianGrid strokeDasharray="3 3" with class "stroke-muted"
      - XAxis dataKey="date", small font, muted color
      - YAxis domain={[0, 10]} for consistent score scale
      - Tooltip with custom styling (bg-background, border, rounded)
      - ReferenceLine at y={7} with gold dashed line (passing score indicator)
      - Line type="monotone" dataKey="score" with navy stroke, gold activeDot

    Use CSS variables for colors:
    - stroke="var(--underdog-navy)"
    - activeDot fill="var(--underdog-gold)"
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>ScoreTrendChart renders line chart with proper styling and empty state</done>
</task>

<task type="auto">
  <name>Task 2: Create DimensionRadarChart component</name>
  <files>src/components/dashboard/progress/DimensionRadarChart.tsx</files>
  <action>
    Create `src/components/dashboard/progress/DimensionRadarChart.tsx`:

    - 'use client' directive
    - Import from recharts: RadarChart, PolarGrid, PolarAngleAxis, Radar, ResponsiveContainer, Tooltip
    - Import cn from @/lib/utils
    - Import ScoreDimension from @/types

    Props interface:
    ```typescript
    interface DimensionRadarChartProps {
      data: Record<ScoreDimension, number>
      className?: string
    }
    ```

    Dimension label mapping:
    ```typescript
    const dimensionLabels: Record<ScoreDimension, string> = {
      opener: 'Opener',
      pitch: 'Pitch',
      discovery: 'Discovery',
      objection_handling: 'Objections',
      closing: 'Closing',
      communication: 'Communication'
    }
    ```

    Component behavior:
    - Transform Record to array format: { dimension: string, score: number, fullMark: 10 }
    - If all scores are 0, show empty state: "Complete practice sessions to see your skills breakdown"
    - Wrap in ResponsiveContainer width="100%" height={300}
    - RadarChart with:
      - PolarGrid with class "stroke-muted"
      - PolarAngleAxis dataKey="dimension" with small font
      - Tooltip
      - Radar with navy stroke, gold fill at 0.3 opacity
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>DimensionRadarChart renders radar chart with 6 dimensions and empty state</done>
</task>

<task type="auto">
  <name>Task 3: Create CurriculumProgressCard and ModuleBreakdown</name>
  <files>src/components/dashboard/progress/CurriculumProgressCard.tsx, src/components/dashboard/progress/ModuleBreakdown.tsx</files>
  <action>
    Create `src/components/dashboard/progress/CurriculumProgressCard.tsx`:

    - 'use client' directive (for framer motion)
    - Import OverallProgressBar, CurriculumStats from @/components/curriculum/CurriculumProgress
    - Import ModuleBreakdown from ./ModuleBreakdown

    Props interface:
    ```typescript
    interface ModuleProgress {
      moduleId: number
      completed: boolean
      score: number | null
      completedAt: string | null
    }

    interface CurriculumProgressCardProps {
      progress: ModuleProgress[]
      className?: string
    }
    ```

    Component behavior:
    - Calculate completed count from progress.filter(p => p.completed).length
    - Render card with:
      - OverallProgressBar completed={completedCount} total={12}
      - CurriculumStats completed={completedCount} total={12}
      - ModuleBreakdown progress={progress}

    ---

    Create `src/components/dashboard/progress/ModuleBreakdown.tsx`:

    - 'use client' directive
    - Import motion from 'motion/react'
    - Import CURRICULUM_MODULES from @/config/curriculum
    - Import CheckCircle, Circle, BookOpen from lucide-react
    - Import cn from @/lib/utils

    Props: same ModuleProgress[] from parent

    Component behavior:
    - Map over CURRICULUM_MODULES (12 modules)
    - For each module, find matching progress
    - Render list item with:
      - CheckCircle (green) if completed, Circle (muted) if not
      - Module name
      - Score badge if completed (e.g., "8.5/10")
      - Completion date if completed (formatted as "Jan 15")
    - Use motion.div for staggered animation (staggerChildren: 0.05)
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>CurriculumProgressCard and ModuleBreakdown render curriculum progress with module list</done>
</task>

<task type="auto">
  <name>Task 4: Update DashboardClient with Progress tab</name>
  <files>src/components/dashboard/DashboardClient.tsx</files>
  <action>
    Update `src/components/dashboard/DashboardClient.tsx`:

    1. Add new imports:
       - Import BarChart3 from lucide-react
       - Import ScoreTrendChart from './progress/ScoreTrendChart'
       - Import DimensionRadarChart from './progress/DimensionRadarChart'
       - Import CurriculumProgressCard from './progress/CurriculumProgressCard'
       - Import type ScoreDimension from '@/types'

    2. Update DashboardClientProps interface to add:
       ```typescript
       initialScoreTrends: Array<{ date: string; score: number }>
       initialDimensionAverages: Record<ScoreDimension, number>
       initialCurriculumProgress: Array<{
         moduleId: number
         completed: boolean
         score: number | null
         completedAt: string | null
       }>
       ```

    3. Update activeTab type: 'practice' | 'calls' | 'progress'

    4. Add third tab button in tab bar:
       ```tsx
       <button onClick={() => setActiveTab('progress')} ...>
         <BarChart3 className="w-4 h-4 inline mr-2" />
         Progress
       </button>
       ```

    5. Add Progress tab content (after calls tab):
       ```tsx
       {activeTab === 'progress' && (
         <div className="space-y-8">
           {/* Curriculum Progress */}
           <div className="bg-white rounded-2xl p-6 shadow-sm border">
             <h2 className="text-lg font-semibold text-navy mb-4">Curriculum Progress</h2>
             <CurriculumProgressCard progress={initialCurriculumProgress} />
           </div>

           {/* Performance Charts - 2 column grid on lg */}
           <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
             <div className="bg-white rounded-2xl p-6 shadow-sm border">
               <h2 className="text-lg font-semibold text-navy mb-4">Score Trend</h2>
               <ScoreTrendChart data={initialScoreTrends} />
             </div>
             <div className="bg-white rounded-2xl p-6 shadow-sm border">
               <h2 className="text-lg font-semibold text-navy mb-4">Skills Breakdown</h2>
               <DimensionRadarChart data={initialDimensionAverages} />
             </div>
           </div>
         </div>
       )}
       ```

    Note: Progress data is static (no pagination needed), so just use initial props directly.
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>DashboardClient has 3 tabs with Progress showing curriculum and charts</done>
</task>

<task type="auto">
  <name>Task 5: Update dashboard page to fetch progress data</name>
  <files>src/app/dashboard/page.tsx</files>
  <action>
    Update `src/app/dashboard/page.tsx`:

    1. Add imports:
       ```typescript
       import { getScoreTrends, getDimensionAverages } from '@/lib/actions/progress'
       import { getCurriculumProgress } from '@/lib/actions/curriculum'
       ```

    2. Update Promise.all to fetch all data:
       ```typescript
       const [sessionsResult, callsResult, scoreTrends, dimensionAverages, curriculumProgress] = await Promise.all([
         getUserPracticeSessions({ limit: 10, offset: 0 }),
         getUserCallUploads({ limit: 10, offset: 0 }),
         getScoreTrends(20),
         getDimensionAverages(),
         getCurriculumProgress(),
       ])
       ```

    3. Pass new props to DashboardClient:
       ```tsx
       <DashboardClient
         initialSessions={sessionsResult.sessions}
         initialSessionsHasMore={sessionsResult.hasMore}
         initialCalls={callsResult.uploads}
         initialCallsHasMore={callsResult.hasMore}
         initialScoreTrends={scoreTrends}
         initialDimensionAverages={dimensionAverages}
         initialCurriculumProgress={curriculumProgress}
       />
       ```
  </action>
  <verify>npx tsc --noEmit && npm run build</verify>
  <done>Dashboard page fetches all progress data on server and passes to client</done>
</task>

</tasks>

<verification>
```bash
# TypeScript check
npx tsc --noEmit

# Build check
npm run build

# Verify new components exist
ls -la src/components/dashboard/progress/

# Verify tabs work (manual check in browser)
# Visit /dashboard and verify 3 tabs: Practice Sessions, Call Analyses, Progress
```
</verification>

<success_criteria>
- 4 new components in src/components/dashboard/progress/
- DashboardClient has 3 tabs (Practice Sessions, Call Analyses, Progress)
- Progress tab shows curriculum progress, score trend chart, and radar chart
- Empty states render when no data exists
- TypeScript compiles with no errors
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/02-user-dashboard-progress/02-02-SUMMARY.md`
</output>
