---
phase: 03-admin-dashboard-users
plan: 03
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/app/admin/content/page.tsx
  - src/app/admin/content/personas/page.tsx
  - src/app/admin/content/rubric/page.tsx
  - src/components/admin/PersonaCard.tsx
  - src/components/admin/RubricDisplay.tsx
autonomous: true

must_haves:
  truths:
    - "Admin can view all personas with their configurations"
    - "Admin can view the scoring rubric with all dimensions and criteria"
    - "Content displays as read-only - correct per RESEARCH.md: content lives in TypeScript config files, editing would require database migration which is out of MVP scope"
    - "Personas show name, role, personality, warmth, objections"
    - "Rubric shows all 6 dimensions with their weighted criteria"
    - "Read-only visibility satisfies ADMIN-04 - full configuration visibility without runtime editing"
  artifacts:
    - path: "src/app/admin/content/page.tsx"
      provides: "Content management hub page"
      min_lines: 30
    - path: "src/app/admin/content/personas/page.tsx"
      provides: "Personas list page"
      min_lines: 40
    - path: "src/app/admin/content/rubric/page.tsx"
      provides: "Rubric configuration page"
      min_lines: 40
    - path: "src/components/admin/PersonaCard.tsx"
      provides: "Persona display card"
      min_lines: 40
    - path: "src/components/admin/RubricDisplay.tsx"
      provides: "Rubric display component"
      min_lines: 60
  key_links:
    - from: "src/app/admin/content/personas/page.tsx"
      to: "src/config/personas.ts"
      via: "getAllPersonas import"
      pattern: "getAllPersonas|PERSONAS"
    - from: "src/app/admin/content/rubric/page.tsx"
      to: "src/config/rubric.ts"
      via: "SCORING_RUBRIC import"
      pattern: "SCORING_RUBRIC"
---

<objective>
Build content management interface for viewing personas and rubric.

Purpose: Admins can view all platform content configuration.
Output: Content hub page, personas list page, rubric display page with components.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-admin-dashboard-users/03-CONTEXT.md
@.planning/phases/03-admin-dashboard-users/03-RESEARCH.md
@.planning/phases/03-admin-dashboard-users/03-01-SUMMARY.md

# Content config files to display
@src/config/personas.ts (PERSONAS, PERSONA_PROMPTS, getAllPersonas)
@src/config/rubric.ts (SCORING_RUBRIC, ScoringRubric type)

# Admin layout from Plan 02
@src/app/admin/layout.tsx
@src/components/admin/AdminNav.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create content management hub page</name>
  <files>src/app/admin/content/page.tsx</files>
  <action>
    Create `src/app/admin/content/page.tsx`:

    - Server component
    - Import Link from 'next/link'
    - Import Users, FileText, Target from lucide-react
    - Import { PERSONAS } from '@/config/personas'
    - Import { SCORING_RUBRIC } from '@/config/rubric'

    Component behavior:
    - Overview of content available to manage
    - Card links to Personas and Rubric subpages
    - Show counts: X personas, 6 scoring dimensions

    Layout:
    ```tsx
    <div>
      <h1 className="text-2xl font-bold text-navy mb-2">Content Management</h1>
      <p className="text-muted-foreground mb-8">
        View platform content configuration. Content is currently read-only.
      </p>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <ContentCard
          title="AI Personas"
          description="Practice conversation partners with unique personalities"
          count={Object.keys(PERSONAS).length}
          countLabel="personas"
          href="/admin/content/personas"
          icon={Users}
        />
        <ContentCard
          title="Scoring Rubric"
          description="Evaluation criteria for sales call performance"
          count={SCORING_RUBRIC.length}
          countLabel="dimensions"
          href="/admin/content/rubric"
          icon={Target}
        />
      </div>

      <div className="mt-8 p-4 bg-amber-50 border border-amber-200 rounded-lg">
        <p className="text-sm text-amber-800">
          <strong>Note:</strong> Content is defined in configuration files and displayed here for reference.
          To modify content, update the source files in <code>src/config/</code>.
        </p>
      </div>
    </div>
    ```

    Create inline ContentCard component.
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>Content hub page shows links to personas and rubric sections</done>
</task>

<task type="auto">
  <name>Task 2: Create PersonaCard component</name>
  <files>src/components/admin/PersonaCard.tsx</files>
  <action>
    Create `src/components/admin/PersonaCard.tsx`:

    - Server component (no interactivity needed)
    - Import type Persona from '@/types'
    - Import cn from '@/lib/utils'
    - Import User, Thermometer, MessageSquare from lucide-react

    Props:
    ```typescript
    interface PersonaCardProps {
      persona: Persona
      prompt?: string
      className?: string
    }
    ```

    Component behavior:
    - Card with persona details
    - Header: name, role
    - Warmth indicator (visual bar 0-1 scale)
    - Personality description
    - Objection tags (list of objection types)
    - Expandable prompt section (collapsed by default, show first 200 chars)
    - Voice ID and Assistant ID shown in small text

    Card structure:
    ```tsx
    <div className="bg-white rounded-xl border shadow-sm p-6">
      {/* Header */}
      <div className="flex items-start justify-between mb-4">
        <div>
          <h3 className="text-lg font-semibold text-navy">{persona.name}</h3>
          <p className="text-sm text-muted-foreground">{persona.role}</p>
        </div>
        <WarmthIndicator value={persona.warmth} />
      </div>

      {/* Personality */}
      <p className="text-sm mb-4">{persona.personality}</p>

      {/* Objections */}
      <div className="flex flex-wrap gap-2 mb-4">
        {persona.objections.map(obj => (
          <span key={obj} className="px-2 py-1 bg-muted rounded text-xs">
            {obj.replace(/_/g, ' ')}
          </span>
        ))}
      </div>

      {/* Technical IDs */}
      <div className="text-xs text-muted-foreground border-t pt-4 mt-4">
        <p>Voice ID: <code>{persona.voiceId}</code></p>
        <p>Assistant ID: <code>{persona.assistantId}</code></p>
      </div>

      {/* Prompt preview (if provided) */}
      {prompt && (
        <details className="mt-4">
          <summary className="text-sm text-navy cursor-pointer">View System Prompt</summary>
          <pre className="mt-2 p-4 bg-muted rounded text-xs overflow-x-auto whitespace-pre-wrap">
            {prompt}
          </pre>
        </details>
      )}
    </div>
    ```

    Create inline WarmthIndicator:
    - Visual bar from cold (blue) to warm (orange)
    - Show percentage label
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>PersonaCard displays persona with all configuration details</done>
</task>

<task type="auto">
  <name>Task 3: Create personas list page</name>
  <files>src/app/admin/content/personas/page.tsx</files>
  <action>
    Create `src/app/admin/content/personas/page.tsx`:

    - Server component
    - Import { PERSONAS, PERSONA_PROMPTS, getAllPersonas } from '@/config/personas'
    - Import PersonaCard from '@/components/admin/PersonaCard'
    - Import Link from 'next/link'
    - Import ArrowLeft from 'lucide-react'

    Component behavior:
    - Back link to /admin/content
    - Header with persona count
    - Grid of PersonaCard components
    - Pass both persona data and prompt to each card

    Layout:
    ```tsx
    <div>
      <Link href="/admin/content" className="inline-flex items-center text-muted-foreground hover:text-navy mb-6">
        <ArrowLeft className="w-4 h-4 mr-2" />
        Back to Content
      </Link>

      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold text-navy">AI Personas</h1>
        <span className="text-muted-foreground">{personas.length} personas</span>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {personas.map(persona => (
          <PersonaCard
            key={persona.id}
            persona={persona}
            prompt={PERSONA_PROMPTS[persona.id]}
          />
        ))}
      </div>
    </div>
    ```
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>Personas page displays all personas with their configurations</done>
</task>

<task type="auto">
  <name>Task 4: Create RubricDisplay component</name>
  <files>src/components/admin/RubricDisplay.tsx</files>
  <action>
    Create `src/components/admin/RubricDisplay.tsx`:

    - Server component
    - Import type ScoringRubric from '@/types'
    - Import cn from '@/lib/utils'
    - Import Target, Scale from 'lucide-react'

    Props:
    ```typescript
    interface RubricDisplayProps {
      rubric: ScoringRubric[]
      className?: string
    }
    ```

    Component behavior:
    - Accordion-style display of all dimensions
    - Each dimension shows:
      - Dimension name (formatted: objection_handling -> Objection Handling)
      - Weight as percentage
      - List of criteria with their weights and descriptions
    - Color coding for weight importance

    Dimension label mapping:
    ```typescript
    const dimensionLabels: Record<string, string> = {
      opener: 'Opener',
      pitch: 'Pitch',
      discovery: 'Discovery',
      objection_handling: 'Objection Handling',
      closing: 'Closing',
      communication: 'Communication'
    }
    ```

    Layout:
    ```tsx
    <div className="space-y-4">
      {rubric.map(dimension => (
        <div key={dimension.dimension} className="bg-white rounded-xl border shadow-sm overflow-hidden">
          {/* Dimension Header */}
          <div className="p-4 bg-muted/50 flex items-center justify-between">
            <h3 className="font-semibold text-navy">
              {dimensionLabels[dimension.dimension]}
            </h3>
            <span className="text-sm font-medium text-navy">
              {Math.round(dimension.weight * 100)}% weight
            </span>
          </div>

          {/* Criteria List */}
          <div className="p-4">
            <table className="w-full text-sm">
              <thead>
                <tr className="text-muted-foreground border-b">
                  <th className="text-left py-2">Criteria</th>
                  <th className="text-left py-2">Description</th>
                  <th className="text-right py-2">Weight</th>
                </tr>
              </thead>
              <tbody>
                {dimension.criteria.map(criterion => (
                  <tr key={criterion.name} className="border-b last:border-0">
                    <td className="py-2 font-medium">{formatCriterionName(criterion.name)}</td>
                    <td className="py-2 text-muted-foreground">{criterion.description}</td>
                    <td className="py-2 text-right">{Math.round(criterion.weight * 100)}%</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      ))}
    </div>
    ```

    Helper function:
    ```typescript
    function formatCriterionName(name: string): string {
      return name.split('_').map(word =>
        word.charAt(0).toUpperCase() + word.slice(1)
      ).join(' ')
    }
    ```
  </action>
  <verify>npx tsc --noEmit</verify>
  <done>RubricDisplay shows all dimensions with criteria and weights</done>
</task>

<task type="auto">
  <name>Task 5: Create rubric configuration page</name>
  <files>src/app/admin/content/rubric/page.tsx</files>
  <action>
    Create `src/app/admin/content/rubric/page.tsx`:

    - Server component
    - Import { SCORING_RUBRIC } from '@/config/rubric'
    - Import RubricDisplay from '@/components/admin/RubricDisplay'
    - Import Link from 'next/link'
    - Import ArrowLeft, Info from 'lucide-react'

    Component behavior:
    - Back link to /admin/content
    - Header with explanation
    - Total weights validation display
    - RubricDisplay component

    Layout:
    ```tsx
    <div>
      <Link href="/admin/content" className="inline-flex items-center text-muted-foreground hover:text-navy mb-6">
        <ArrowLeft className="w-4 h-4 mr-2" />
        Back to Content
      </Link>

      <div className="mb-6">
        <h1 className="text-2xl font-bold text-navy">Scoring Rubric</h1>
        <p className="text-muted-foreground mt-1">
          Evaluation criteria for sales call performance analysis
        </p>
      </div>

      {/* Explainer Card */}
      <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex gap-3">
        <Info className="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5" />
        <div className="text-sm text-blue-800">
          <p className="font-medium mb-1">How scoring works</p>
          <p>
            Each practice session and call analysis is scored across 6 dimensions.
            The overall score is a weighted average based on the dimension weights shown below.
            Each dimension has multiple criteria that contribute to its score.
          </p>
        </div>
      </div>

      {/* Weights Summary */}
      <div className="bg-white rounded-xl border shadow-sm p-4 mb-6">
        <h2 className="font-semibold text-navy mb-3">Dimension Weights</h2>
        <div className="flex flex-wrap gap-4">
          {SCORING_RUBRIC.map(d => (
            <div key={d.dimension} className="flex items-center gap-2">
              <div
                className="w-3 h-3 rounded-full"
                style={{ backgroundColor: getDimensionColor(d.dimension) }}
              />
              <span className="text-sm">
                {dimensionLabels[d.dimension]}: {Math.round(d.weight * 100)}%
              </span>
            </div>
          ))}
        </div>
        <p className="text-xs text-muted-foreground mt-2">
          Total: {Math.round(SCORING_RUBRIC.reduce((sum, d) => sum + d.weight, 0) * 100)}%
        </p>
      </div>

      <RubricDisplay rubric={SCORING_RUBRIC} />
    </div>
    ```

    Helper for dimension colors (match chart colors if applicable):
    ```typescript
    const dimensionColors: Record<string, string> = {
      opener: '#3B82F6',
      pitch: '#10B981',
      discovery: '#F59E0B',
      objection_handling: '#EF4444',
      closing: '#8B5CF6',
      communication: '#EC4899'
    }
    ```
  </action>
  <verify>npx tsc --noEmit && npm run build</verify>
  <done>Rubric page displays complete scoring configuration</done>
</task>

</tasks>

<verification>
```bash
# TypeScript check
npx tsc --noEmit

# Build check
npm run build

# Verify pages exist
ls -la src/app/admin/content/
ls -la src/app/admin/content/personas/
ls -la src/app/admin/content/rubric/

# Verify components exist
ls -la src/components/admin/PersonaCard.tsx
ls -la src/components/admin/RubricDisplay.tsx
```
</verification>

<success_criteria>
- Content hub page shows links to personas and rubric sections
- Personas page displays all 6 personas with full configuration
- Rubric page displays all 6 dimensions with criteria and weights
- Content is displayed as read-only (per CONTEXT.md)
- Navigation between content pages works
- TypeScript compiles with no errors
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/03-admin-dashboard-users/03-03-SUMMARY.md`
</output>
